[{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\(authenticated)\\admin\\users\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[600,603],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[600,603],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1164,1167],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1164,1167],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1836,1839],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1836,1839],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2829,2832],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2829,2832],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2842,2845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2842,2845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\(authenticated)\\diagnostic\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1753,1756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1753,1756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\(authenticated)\\layout.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\(authenticated)\\layout.tsx:28:13\n  26 |         const storedUser = localStorage.getItem('user');\n  27 |         if (storedUser) {\n> 28 |             setUser(JSON.parse(storedUser));\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  29 |         }\n  30 |     }, []);\n  31 |     const pathname = usePathname();","line":28,"column":13,"nodeType":null,"endLine":28,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Layout, Menu, theme, App as AntdApp } from 'antd';\r\nimport {\r\n    ToolOutlined,\r\n    CarOutlined,\r\n    LogoutOutlined,\r\n    MedicineBoxOutlined\r\n} from '@ant-design/icons';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { User } from '@/lib/types';\r\n\r\nconst { Header, Sider, Content } = Layout;\r\n\r\nexport default function AuthenticatedLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        const storedUser = localStorage.getItem('user');\r\n        if (storedUser) {\r\n            setUser(JSON.parse(storedUser));\r\n        }\r\n    }, []);\r\n    const pathname = usePathname();\r\n    const {\r\n        token: { colorBgContainer, borderRadiusLG },\r\n    } = theme.useToken();\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        router.push('/login');\r\n    };\r\n\r\n    return (\r\n        <AntdApp>\r\n            <Layout style={{ minHeight: '100vh' }}>\r\n                <Sider trigger={null} collapsible collapsed={collapsed} onCollapse={setCollapsed} theme=\"light\">\r\n                    <div className=\"demo-logo-vertical\" style={{ height: 64, margin: 16, background: '#E60000', borderRadius: 6, display: 'flex', alignItems: 'center', justifyContent: 'center', color: 'white', fontWeight: 'bold' }}>\r\n                        {collapsed ? 'SPR' : 'SPR ERP'}\r\n                    </div>\r\n                    <Menu\r\n                        theme=\"light\"\r\n                        mode=\"inline\"\r\n                        selectedKeys={[pathname]}\r\n                        onClick={({ key }) => {\r\n                            if (key === 'logout') handleLogout();\r\n                            else router.push(key);\r\n                        }}\r\n                        items={[\r\n                            {\r\n                                key: '/diagnostic',\r\n                                icon: <MedicineBoxOutlined />,\r\n                                label: 'Diagnostic',\r\n                            },\r\n                            {\r\n                                key: '/repairs',\r\n                                icon: <ToolOutlined />,\r\n                                label: 'Repairs',\r\n                            },\r\n                            {\r\n                                key: '/logistics',\r\n                                icon: <CarOutlined />,\r\n                                label: 'Logistics',\r\n                            },\r\n                            {\r\n                                key: 'logout',\r\n                                icon: <LogoutOutlined />,\r\n                                label: 'Logout',\r\n                                danger: true,\r\n                            }\r\n                        ]}\r\n                    />\r\n                </Sider>\r\n                <Layout>\r\n                    <Header style={{ padding: 0, background: colorBgContainer, display: 'flex', alignItems: 'center', justifyContent: 'space-between', paddingRight: 24, paddingLeft: 24 }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                            {user && (\r\n                                <div style={{ fontWeight: '600', color: '#555', fontSize: '14px' }}>\r\n                                    Current ID: <span style={{ color: '#E60000' }}>{user.fullName}</span>\r\n                                    <span style={{ marginLeft: 8, padding: '2px 8px', background: '#f0f0f0', borderRadius: '4px', fontSize: '12px', color: '#888' }}>\r\n                                        {user.username}\r\n                                    </span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </Header>\r\n                    <Content\r\n                        style={{\r\n                            margin: '24px 16px',\r\n                            padding: 24,\r\n                            minHeight: 280,\r\n                            background: colorBgContainer,\r\n                            borderRadius: borderRadiusLG,\r\n                        }}\r\n                    >\r\n                        {children}\r\n                    </Content>\r\n                </Layout>\r\n            </Layout>\r\n        </AntdApp>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\(authenticated)\\logistics\\batches\\[batchNo]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Divider' is defined but never used.","line":4,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":64,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Divider"},"fix":{"range":[137,146],"text":""},"desc":"Remove unused variable \"Divider\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loading' is assigned a value but never used.","line":15,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":19}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[587,590],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[587,590],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1582,1585],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1582,1585],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState, useCallback } from 'react';\r\nimport { Card, Table, Tag, Button, Space, Descriptions, Divider, Typography, message, App, Row, Col } from 'antd';\r\nimport { ArrowLeftOutlined, CarOutlined } from '@ant-design/icons';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport api from '@/lib/axios';\r\nimport { formatDate } from '@/lib/utils';\r\n\r\nconst { Title } = Typography;\r\n\r\nexport default function BatchDetailPage() {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [batch, setBatch] = useState<any>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const router = useRouter();\r\n    const { batchNo } = useParams();\r\n\r\n    const fetchBatch = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const { data } = await api.get(`/logistics/batches/${batchNo}`);\r\n            setBatch(data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch batch:', error);\r\n            message.error('Batch not found');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [batchNo]);\r\n\r\n    useEffect(() => {\r\n        fetchBatch();\r\n    }, [fetchBatch]);\r\n\r\n    const handlePickup = async () => {\r\n        try {\r\n            await api.post('/logistics/scan/pickup', { batchNo });\r\n            message.success('Batch status updated to IN TRANSIT');\r\n            fetchBatch();\r\n        } catch (error: unknown) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            message.error((error as any).response?.data?.message || 'Failed to update status');\r\n        }\r\n    };\r\n\r\n    if (!batch) return <div className=\"p-6\">Loading batch details...</div>;\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Order No.',\r\n            dataIndex: ['repairOrder', 'orderNo'],\r\n            key: 'orderNo',\r\n            render: (text: string) => <span className=\"font-bold\">{text}</span>\r\n        },\r\n        {\r\n            title: 'Model',\r\n            dataIndex: ['repairOrder', 'model'],\r\n            key: 'model'\r\n        },\r\n        {\r\n            title: 'Current Status',\r\n            dataIndex: ['repairOrder', 'status'],\r\n            key: 'status',\r\n            render: (status: string) => <Tag>{status}</Tag>\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <App>\r\n            <div className=\"p-0\">\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    <Space>\r\n                        <Button icon={<ArrowLeftOutlined />} onClick={() => router.push('/logistics')} />\r\n                        <Title level={3} style={{ margin: 0 }}>Batch Details: {batchNo}</Title>\r\n                    </Space>\r\n                    <Space>\r\n                        {batch.status === 'CREATED' && (\r\n                            <Button\r\n                                type=\"primary\"\r\n                                icon={<CarOutlined />}\r\n                                onClick={handlePickup}\r\n                                className=\"bg-black\"\r\n                            >\r\n                                Mark as Pickup (In Transit)\r\n                            </Button>\r\n                        )}\r\n                    </Space>\r\n                </div>\r\n\r\n                <Row gutter={16}>\r\n                    <Col span={24}>\r\n                        <Card variant=\"borderless\" className=\"mb-6\">\r\n                            <Descriptions title=\"Transport Information\" bordered>\r\n                                <Descriptions.Item label=\"SPR ID\">{batch.batchNo}</Descriptions.Item>\r\n                                <Descriptions.Item label=\"Direction\">\r\n                                    <Tag color={batch.direction === 'TO_HQ' ? 'orange' : 'blue'}>\r\n                                        {batch.direction === 'TO_HQ' ? 'To HQ' : 'To Branch'}\r\n                                    </Tag>\r\n                                </Descriptions.Item>\r\n                                <Descriptions.Item label=\"Current Status\">\r\n                                    <Tag color={batch.status === 'CREATED' ? 'blue' : 'green'}>{batch.status}</Tag>\r\n                                </Descriptions.Item>\r\n                                <Descriptions.Item label=\"Creator\">{batch.creator?.fullName}</Descriptions.Item>\r\n                                <Descriptions.Item label=\"Date\">{formatDate(batch.createdAt)}</Descriptions.Item>\r\n                            </Descriptions>\r\n                        </Card>\r\n\r\n                        <Card title=\"Repairs in this Batch\" variant=\"borderless\">\r\n                            <Table\r\n                                dataSource={batch.items}\r\n                                columns={columns}\r\n                                rowKey=\"id\"\r\n                                pagination={false}\r\n                            />\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        </App>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\(authenticated)\\logistics\\create\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1067,1070],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1067,1070],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2402,2405],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2402,2405],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3154,3157],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3154,3157],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\(authenticated)\\logistics\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2514,2517],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2514,2517],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2527,2530],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2527,2530],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Table, Tag, Button, Card } from 'antd';\r\nimport { PlusOutlined, EyeOutlined } from '@ant-design/icons';\r\nimport api from '@/lib/axios';\r\nimport { formatDate } from '@/lib/utils';\r\n\r\n\r\n\r\nimport BatchDetailModal from '@/components/BatchDetailModal';\r\nimport CreateBatchModal from '@/components/CreateBatchModal';\r\n\r\nexport default function LogisticsPage() {\r\n    const [batches, setBatches] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Modal states\r\n    const [selectedBatchNo, setSelectedBatchNo] = useState<string | null>(null);\r\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchBatches();\r\n    }, []);\r\n\r\n    const fetchBatches = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const { data } = await api.get('/logistics/batches');\r\n            setBatches(data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch batches:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Batch No.',\r\n            dataIndex: 'batchNo',\r\n            key: 'batchNo',\r\n            render: (text: string) => <span className=\"font-bold\">{text}</span>\r\n        },\r\n        {\r\n            title: 'Direction',\r\n            dataIndex: 'direction',\r\n            key: 'direction',\r\n            render: (direction: string) => (\r\n                <Tag color={direction === 'TO_HQ' ? 'orange' : 'blue'} variant=\"filled\" className=\"font-bold\">\r\n                    {direction === 'TO_HQ' ? 'TO HQ' : 'TO BRANCH'}\r\n                </Tag>\r\n            )\r\n        },\r\n        {\r\n            title: 'Status',\r\n            dataIndex: 'status',\r\n            key: 'status',\r\n            render: (status: string) => {\r\n                let color = 'default';\r\n                if (status === 'CREATED') color = 'blue';\r\n                if (status === 'IN_TRANSIT') color = 'processing';\r\n                if (status === 'RECEIVED') color = 'success';\r\n                return <Tag color={color} variant=\"filled\" className=\"font-bold\">{status}</Tag>;\r\n            }\r\n        },\r\n        {\r\n            title: 'Created At',\r\n            dataIndex: 'createdAt',\r\n            key: 'createdAt',\r\n            render: (date: string) => formatDate(date)\r\n        },\r\n        {\r\n            title: 'Actions',\r\n            key: 'actions',\r\n            render: (_: any, record: any) => (\r\n                <Button\r\n                    type=\"link\"\r\n                    icon={<EyeOutlined />}\r\n                    onClick={() => setSelectedBatchNo(record.batchNo)}\r\n                    className=\"font-medium\"\r\n                >\r\n                    View\r\n                </Button>\r\n            )\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div suppressHydrationWarning>\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold m-0\">Logistics Management</h2>\r\n                    <p className=\"text-gray-400 text-sm\">Transport batches and real-time tracking</p>\r\n                </div>\r\n                <Button\r\n                    type=\"primary\"\r\n                    icon={<PlusOutlined />}\r\n                    style={{ backgroundColor: '#E60000' }}\r\n                    className=\"h-10 px-6 font-bold border-none\"\r\n                    onClick={() => setIsCreateModalOpen(true)}\r\n                >\r\n                    Create Batch\r\n                </Button>\r\n            </div>\r\n\r\n            <Card className=\"shadow-sm rounded-xl border-gray-100\">\r\n                <Table\r\n                    columns={columns}\r\n                    dataSource={batches}\r\n                    rowKey=\"id\"\r\n                    loading={loading}\r\n                    pagination={{ pageSize: 12 }}\r\n                />\r\n            </Card>\r\n\r\n            <BatchDetailModal\r\n                batchNo={selectedBatchNo}\r\n                open={selectedBatchNo !== null}\r\n                onCancel={() => setSelectedBatchNo(null)}\r\n            />\r\n\r\n            <CreateBatchModal\r\n                open={isCreateModalOpen}\r\n                onCancel={() => setIsCreateModalOpen(false)}\r\n                onSuccess={() => {\r\n                    setIsCreateModalOpen(false);\r\n                    fetchBatches();\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\(authenticated)\\repairs\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRouter' is defined but never used.","line":5,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":30,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useRouter"},"fix":{"range":[217,228],"text":""},"desc":"Remove unused variable \"useRouter\"."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[742,745],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[742,745],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1083,1086],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1083,1086],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2388,2391],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2388,2391],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2624,2627],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2624,2627],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3728,3731],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3728,3731],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":140,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":140,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6837,6840],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6837,6840],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Card, Descriptions, Tag, Timeline, Button, Modal, Form, Select, Input, message, Spin, Space, Popconfirm } from 'antd';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport api from '@/lib/axios';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { formatDate } from '@/lib/utils';\r\nimport { ClockCircleOutlined, CheckCircleOutlined } from '@ant-design/icons';\r\n\r\nexport default function RepairDetails() {\r\n    const { id } = useParams();\r\n    // const router = useRouter(); // Removed unused router\r\n    const { user, hasRole } = useAuth();\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [order, setOrder] = useState<any>(null);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Modals\r\n    const [isAssignModalOpen, setIsAssignModalOpen] = useState(false);\r\n    const [isFailModalOpen, setIsFailModalOpen] = useState(false);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [technicians, setTechnicians] = useState<any[]>([]); // Need an API for this\r\n    const [actionLoading, setActionLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchOrder = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const { data } = await api.get(`/repairs/${id}`);\r\n                setOrder(data);\r\n            } catch (e) {\r\n                console.error(e);\r\n                message.error('Failed to load order');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        if (id) fetchOrder();\r\n    }, [id]);\r\n\r\n    const loadTechnicians = async () => {\r\n        // We need an endpoint to list technicians. \r\n        // For MVP, if we don't have it, we might need to add it or just input ID manually?\r\n        // Design Spec says: \"Assign to Technician\".\r\n        // Let's assume we can fetch users by role or list all users.\r\n        // I implemented `UsersController.findAll` but restricted to HQ/Super.\r\n        // If current user is HQ, they can fetch list.\r\n        try {\r\n            const { data } = await api.get('/users');\r\n            // Filter frontend side or backend side? Backend `findAll` returns all users.\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            setTechnicians(data.filter((u: any) => u.role === 'TECHNICIAN'));\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const handleAction = async (action: string, payload: any = {}) => {\r\n        setActionLoading(true);\r\n        try {\r\n            if (action === 'assign') {\r\n                await api.patch(`/repairs/${id}/assign`, payload);\r\n                setIsAssignModalOpen(false);\r\n            } else if (action === 'start') {\r\n                await api.patch(`/repairs/${id}/start`);\r\n            } else if (action === 'complete') {\r\n                await api.patch(`/repairs/${id}/complete`);\r\n            } else if (action === 'fail') {\r\n                await api.patch(`/repairs/${id}/fail`, payload);\r\n                setIsFailModalOpen(false);\r\n            }\r\n            message.success('Action successful');\r\n            // We need to re-fetch order here.\r\n            // But fetchOrder is defined inside useEffect if we moved it.\r\n            // So we can either move it out (and wrap in useCallback) or reload page.\r\n            // Let's reload for simplicity or use a trigger.\r\n            window.location.reload();\r\n        } catch (e: unknown) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            message.error((e as any).response?.data?.message || 'Action failed');\r\n        } finally {\r\n            setActionLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading || !order) return <Spin className=\"block mx-auto mt-10\" />;\r\n\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto\">\r\n            <div className=\"flex justify-between mb-4\">\r\n                <h2 className=\"text-2xl font-bold\">Order #{order.orderNo}</h2>\r\n                <Space>\r\n                    {/* HQ Actions */}\r\n                    {hasRole(['HQ_ADMIN', 'SUPER_ADMIN']) && order.status === 'AT_HQ' && (\r\n                        <Button type=\"primary\" onClick={() => { setIsAssignModalOpen(true); loadTechnicians(); }}>\r\n                            Assign Technician\r\n                        </Button>\r\n                    )}\r\n\r\n                    {/* Technician Actions */}\r\n                    {hasRole(['TECHNICIAN']) && order.status === 'ASSIGNED_TO_TECHNICIAN' && user?.id === order.technicianId && (\r\n                        <Button type=\"primary\" onClick={() => handleAction('start')}>\r\n                            Start Repair\r\n                        </Button>\r\n                    )}\r\n\r\n                    {hasRole(['TECHNICIAN']) && order.status === 'UNDER_REPAIR' && user?.id === order.technicianId && (\r\n                        <>\r\n                            <Popconfirm title=\"Confirm Success?\" onConfirm={() => handleAction('complete')}>\r\n                                <Button type=\"primary\" style={{ backgroundColor: 'green' }}>Mark Repaired</Button>\r\n                            </Popconfirm>\r\n                            <Button danger onClick={() => setIsFailModalOpen(true)}>Mark Failed</Button>\r\n                        </>\r\n                    )}\r\n                </Space>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <div className=\"col-span-2\">\r\n                    <Card title=\"Device Info\" className=\"mb-6\">\r\n                        <Descriptions bordered column={1}>\r\n                            <Descriptions.Item label=\"Model\">{order.deviceModel}</Descriptions.Item>\r\n                            <Descriptions.Item label=\"IMEI/SN\">{order.isbn_imei || '-'}</Descriptions.Item>\r\n                            <Descriptions.Item label=\"Problem\">{order.problemDesc}</Descriptions.Item>\r\n                            <Descriptions.Item label=\"Branch\">{order.branch?.name}</Descriptions.Item>\r\n                            <Descriptions.Item label=\"Status\"><Tag color=\"blue\">{order.status}</Tag></Descriptions.Item>\r\n                            <Descriptions.Item label=\"Technician\">{order.technician?.fullName || 'Unassigned'}</Descriptions.Item>\r\n                        </Descriptions>\r\n                    </Card>\r\n                </div>\r\n\r\n                <div className=\"col-span-1\">\r\n                    <Card title=\"History\">\r\n                        <Timeline\r\n                            mode=\"start\"\r\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                            items={order.history?.map((log: any) => ({\r\n                                color: log.toStatus === 'REPAIR_FAILED' ? 'red' : 'blue',\r\n                                icon: log.isScanAction ? <CheckCircleOutlined /> : <ClockCircleOutlined />,\r\n                                title: <span className=\"font-bold text-xs\">{formatDate(log.createdAt)}</span>,\r\n                                content: (\r\n                                    <>\r\n                                        <p className=\"font-semibold m-0\">{log.toStatus.replace(/_/g, ' ')}</p>\r\n                                        <p className=\"text-gray-500 text-xs m-0\">{log.remark} by {log.user?.fullName}</p>\r\n                                    </>\r\n                                )\r\n                            }))}\r\n                        />\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Assign Modal */}\r\n            <Modal\r\n                title=\"Assign Technician\"\r\n                open={isAssignModalOpen}\r\n                onCancel={() => setIsAssignModalOpen(false)}\r\n                footer={null}\r\n            >\r\n                <Form onFinish={(vals) => handleAction('assign', vals)} layout=\"vertical\">\r\n                    <Form.Item name=\"technicianId\" label=\"Select Technician\" rules={[{ required: true }]}>\r\n                        <Select placeholder=\"Choose one...\">\r\n                            {technicians.map(t => (\r\n                                <Select.Option key={t.id} value={t.id}>{t.fullName} ({t.username})</Select.Option>\r\n                            ))}\r\n                        </Select>\r\n                    </Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\" loading={actionLoading} block>Assign</Button>\r\n                </Form>\r\n            </Modal>\r\n\r\n            {/* Fail Modal */}\r\n            <Modal\r\n                title=\"Mark Repair Failed\"\r\n                open={isFailModalOpen}\r\n                onCancel={() => setIsFailModalOpen(false)}\r\n                footer={null}\r\n            >\r\n                <Form onFinish={(vals) => handleAction('fail', vals)} layout=\"vertical\">\r\n                    <Form.Item name=\"reason\" label=\"Failure Reason\" rules={[{ required: true }]}>\r\n                        <Input.TextArea rows={3} placeholder=\"Why cannot be repaired?\" />\r\n                    </Form.Item>\r\n                    <Button danger type=\"primary\" htmlType=\"submit\" loading={actionLoading} block>Confirm Failed</Button>\r\n                </Form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\(authenticated)\\repairs\\create\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1456,1459],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1456,1459],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1966,1969],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1966,1969],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\(authenticated)\\repairs\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\(authenticated)\\scan\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fetchPreview' is assigned a value but never used.","line":68,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'code' is defined but never used.","line":68,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":37}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[808,811],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[808,811],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1403,1406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1403,1406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3818,3821],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3818,3821],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4376,4379],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4376,4379],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7759,7762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7759,7762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState, Suspense } from 'react';\r\nimport { Input, Button, Card, App, List, Tag, Spin, Typography, Space } from 'antd';\r\nimport { CheckCircleOutlined, CarOutlined, LoadingOutlined } from '@ant-design/icons';\r\nimport { Html5QrcodeScanner } from 'html5-qrcode';\r\nimport { useSearchParams, useRouter } from 'next/navigation';\r\nimport api from '@/lib/axios';\r\nimport { formatDate } from '@/lib/utils';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nfunction ScanContent() {\r\n    const [loading, setLoading] = useState(false);\r\n    const [actionLoading, setActionLoading] = useState(false);\r\n    // const [batchNo, setBatchNo] = useState(''); // Unused\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [previewData, setPreviewData] = useState<any>(null);\r\n    const [manualCode, setManualCode] = useState('');\r\n    const searchParams = useSearchParams();\r\n    const router = useRouter();\r\n    const { message: antdMsg } = App.useApp();\r\n\r\n    useEffect(() => {\r\n        const fetchPreview = async (code: string) => {\r\n            setLoading(true);\r\n            try {\r\n                const { data } = await api.get(`/logistics/batches/${code}`);\r\n                setPreviewData(data);\r\n            } catch (e: unknown) {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                antdMsg.error((e as any).response?.data?.message || 'Invalid Batch QR');\r\n                setPreviewData(null);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        const urlBatch = searchParams.get('batchNo');\r\n        if (urlBatch) {\r\n            // setBatchNo(urlBatch);\r\n            fetchPreview(urlBatch);\r\n        }\r\n\r\n        const scanner = new Html5QrcodeScanner(\r\n            \"reader\",\r\n            { fps: 10, qrbox: { width: 250, height: 250 } },\r\n            false\r\n        );\r\n\r\n        scanner.render((decodedText) => {\r\n            let extracted = decodedText;\r\n            try {\r\n                if (decodedText.includes('batchNo=')) {\r\n                    extracted = new URL(decodedText).searchParams.get('batchNo') || decodedText;\r\n                }\r\n            } catch { } // unused var\r\n            // setBatchNo(extracted);\r\n            fetchPreview(extracted);\r\n            scanner.clear();\r\n        }, () => { }); // unused error\r\n\r\n        return () => {\r\n            scanner.clear().catch(() => { });\r\n        };\r\n    }, [searchParams, antdMsg]); // Removed fetchPreview dependency by moving it inside\r\n\r\n    const fetchPreview = async (code: string) => {\r\n        // This function is now duplicated inside useEffect to solve deps, or we can use useCallback.\r\n        // But since it's used in handleAction/manual scan too, let's keep it and use useCallback or accept the duplication/cleanup.\r\n        // Simpler: Define it via useCallback.\r\n    };\r\n\r\n    const handleAction = async () => {\r\n        if (!previewData) return;\r\n        setActionLoading(true);\r\n        try {\r\n            const userStr = localStorage.getItem('user');\r\n            const user = userStr ? JSON.parse(userStr) : null;\r\n\r\n            if (user?.role === 'COURIER') {\r\n                await api.post('/logistics/scan/pickup', { batchNo: previewData.batchNo });\r\n                antdMsg.success(` Pickup Confirmed: Batch ${previewData.batchNo} is now in transit.`);\r\n            } else {\r\n                await api.post('/logistics/scan/receive', { batchNo: previewData.batchNo });\r\n                antdMsg.success(` Receive Confirmed: Batch ${previewData.batchNo} has been delivered.`);\r\n            }\r\n            router.push('/logistics');\r\n        } catch (e: unknown) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            antdMsg.error((e as any).response?.data?.message || 'Action Failed');\r\n        } finally {\r\n            setActionLoading(false);\r\n        }\r\n    };\r\n\r\n    // Re-implement independent fetchPreview to be used by Manual Scan button\r\n    const handleManualScan = async (code: string) => {\r\n        setLoading(true);\r\n        try {\r\n            const { data } = await api.get(`/logistics/batches/${code}`);\r\n            setPreviewData(data);\r\n        } catch (e: unknown) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            antdMsg.error((e as any).response?.data?.message || 'Invalid Batch QR');\r\n            setPreviewData(null);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto py-8 px-4\">\r\n            <Title level={2} className=\"text-center mb-8\">Logistics Scanning</Title>\r\n\r\n            {!previewData && (\r\n                <Card className=\"mb-6 shadow-md rounded-2xl overflow-hidden border-none\">\r\n                    <div id=\"reader\" className=\"w-full\"></div>\r\n                    <div className=\"p-4 text-center text-gray-400\">\r\n                        Please point your camera at the SPR Transport QR Code\r\n                    </div>\r\n                </Card>\r\n            )}\r\n\r\n            {loading && <div className=\"text-center py-10\"><Spin indicator={<LoadingOutlined style={{ fontSize: 40 }} spin />} /></div>}\r\n\r\n            {previewData && (\r\n                <Card\r\n                    className=\"mb-6 shadow-xl border-none rounded-3xl overflow-hidden\"\r\n                    title={\r\n                        <div className=\"flex justify-between items-center py-2\">\r\n                            <span className=\"text-lg font-black\">BATCH VERIFICATION</span>\r\n                            <Tag color=\"red\" variant=\"filled\" className=\"m-0\">{previewData.direction.replace('_', ' ')}</Tag>\r\n                        </div>\r\n                    }\r\n                >\r\n                    <div className=\"bg-gray-50 p-6 rounded-2xl mb-6\">\r\n                        <div className=\"grid grid-cols-2 gap-y-4\">\r\n                            <div>\r\n                                <Text type=\"secondary\" className=\"block text-xs uppercase font-bold tracking-widest\">Batch Number</Text>\r\n                                <Text className=\"text-xl font-black\">{previewData.batchNo}</Text>\r\n                            </div>\r\n                            <div>\r\n                                <Text type=\"secondary\" className=\"block text-xs uppercase font-bold tracking-widest\">Current Status</Text>\r\n                                <Tag color=\"processing\" variant=\"filled\" className=\"font-bold\">{previewData.status}</Tag>\r\n                            </div>\r\n                            <div>\r\n                                <Text type=\"secondary\" className=\"block text-xs uppercase font-bold tracking-widest\">Created On</Text>\r\n                                <Text className=\"font-medium\">{formatDate(previewData.createdAt)}</Text>\r\n                            </div>\r\n                            <div>\r\n                                <Text type=\"secondary\" className=\"block text-xs uppercase font-bold tracking-widest\">Items Count</Text>\r\n                                <Text className=\"font-black text-lg\">{previewData.items?.length || 0}</Text>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <Title level={4} className=\"flex items-center gap-2 mb-4\">\r\n                        <CarOutlined className=\"text-red-600\" /> Included Repair Orders\r\n                    </Title>\r\n                    <List\r\n                        dataSource={previewData.items}\r\n                        className=\"bg-white rounded-xl border border-gray-100 mb-8\"\r\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                        renderItem={(item: any) => (\r\n                            <List.Item className=\"px-4 border-b last:border-none flex justify-between\">\r\n                                <span className=\"font-bold\">{item.repairOrder?.orderNo}</span>\r\n                                <span className=\"text-gray-500\">{item.repairOrder?.deviceModel}</span>\r\n                                <Tag color=\"blue\" variant=\"filled\" className=\"text-[10px] font-bold\">{item.repairOrder?.status}</Tag>\r\n                            </List.Item>\r\n                        )}\r\n                    />\r\n\r\n                    <div className=\"flex flex-col gap-3\">\r\n                        <Button\r\n                            type=\"primary\"\r\n                            size=\"large\"\r\n                            block\r\n                            className=\"h-16 text-lg font-black bg-red-600 hover:bg-black border-none rounded-2xl shadow-lg ring-4 ring-red-100\"\r\n                            onClick={handleAction}\r\n                            loading={actionLoading}\r\n                            icon={<CheckCircleOutlined />}\r\n                        >\r\n                            CONFIRM & UPDATE STATUS\r\n                        </Button>\r\n                        <Button size=\"large\" block variant=\"outlined\" className=\"h-12 font-bold rounded-2xl text-gray-400\" onClick={() => { setPreviewData(null); }}>\r\n                            Cancel / Scan Another\r\n                        </Button>\r\n                    </div>\r\n                </Card>\r\n            )}\r\n\r\n            {!previewData && !loading && (\r\n                <Card title=\"Manual Correction\" className=\"shadow-sm rounded-2xl border-gray-100\">\r\n                    <Space.Compact className=\"w-full h-12\">\r\n                        <Input\r\n                            placeholder=\"Enter Batch No manually...\"\r\n                            value={manualCode}\r\n                            onChange={(e) => setManualCode(e.target.value)}\r\n                        />\r\n                        <Button type=\"primary\" className=\"bg-black border-none font-bold\" onClick={() => handleManualScan(manualCode)}>Load</Button>\r\n                    </Space.Compact>\r\n                </Card>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function ScanPage() {\r\n    return (\r\n        <Suspense fallback={<div className=\"text-center py-20\"><Spin size=\"large\" /></div>}>\r\n            <ScanContent />\r\n        </Suspense>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\login\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\login\\page.tsx:113:9\n  111 |     useEffect(() => {\n  112 |         // Just empty useEffect is enough to trigger re-render on mount if we conditionally render\n> 113 |         setHasMounted(true);\n      |         ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  114 |     }, []);\n  115 |\n  116 |     if (!hasMounted) {","line":113,"column":9,"nodeType":null,"endLine":113,"endColumn":22}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[635,638],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[635,638],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1177,1180],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1177,1180],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, Card, Typography, App } from 'antd';\r\nimport { UserOutlined, LockOutlined, ArrowRightOutlined } from '@ant-design/icons';\r\nimport api from '@/lib/axios';\r\nimport { useRouter } from 'next/navigation';\r\nimport Image from 'next/image';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst LoginContent = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const router = useRouter();\r\n    const { message } = App.useApp();\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const onFinish = async (values: any) => {\r\n        setLoading(true);\r\n        try {\r\n            const { data } = await api.post('/auth/login', values);\r\n            localStorage.setItem('token', data.access_token);\r\n            localStorage.setItem('user', JSON.stringify(data.user));\r\n            message.success('Welcome back, ' + data.user.fullName);\r\n            router.push('/diagnostic');\r\n        } catch (err: unknown) {\r\n            console.error(err);\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            message.error((err as any).response?.data?.message || 'Login failed. Please check your credentials.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-[#f8f9fa] relative overflow-hidden\" suppressHydrationWarning>\r\n            {/* Background Decorative Elements */}\r\n            <div className=\"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-red-50 rounded-full blur-[120px] opacity-60\" />\r\n            <div className=\"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-red-100 rounded-full blur-[120px] opacity-40\" />\r\n\r\n            <Card\r\n                className=\"w-full max-w-[420px] shadow-[0_20px_50px_rgba(0,0,0,0.05)] border-none rounded-2xl overflow-hidden\"\r\n                styles={{ body: { padding: '40px 32px' } }}\r\n            >\r\n                <div className=\"text-center mb-10\">\r\n                    <div className=\"inline-flex items-center justify-center mb-6\">\r\n                        <Image src=\"/logo.png\" alt=\"SPR Logo\" width={224} height={80} className=\"w-56 h-auto drop-shadow-md\" />\r\n                    </div>\r\n                    <Title level={4} className=\"m-0 tracking-[0.2em] font-black text-gray-800 border-none uppercase\">\r\n                        Internal Management\r\n                    </Title>\r\n                </div>\r\n\r\n                <Form\r\n                    name=\"login_form\"\r\n                    onFinish={onFinish}\r\n                    layout=\"vertical\"\r\n                    size=\"large\"\r\n                    requiredMark={false}\r\n                >\r\n                    <Form.Item\r\n                        name=\"username\"\r\n                        rules={[{ required: true, message: 'Your username is required' }]}\r\n                    >\r\n                        <Input\r\n                            prefix={<UserOutlined className=\"text-gray-400 mr-2\" />}\r\n                            placeholder=\"Username\"\r\n                            className=\"rounded-xl border-gray-100 hover:border-red-400 focus:border-red-500 transition-all h-12\"\r\n                        />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        name=\"password\"\r\n                        rules={[{ required: true, message: 'Please enter your password' }]}\r\n                        className=\"mb-8\"\r\n                    >\r\n                        <Input.Password\r\n                            prefix={<LockOutlined className=\"text-gray-400 mr-2\" />}\r\n                            placeholder=\"Password\"\r\n                            className=\"rounded-xl border-gray-100 hover:border-red-400 focus:border-red-500 transition-all h-12\"\r\n                        />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item className=\"mb-0\">\r\n                        <Button\r\n                            type=\"primary\"\r\n                            htmlType=\"submit\"\r\n                            block\r\n                            loading={loading}\r\n                            icon={<ArrowRightOutlined />}\r\n                            className=\"h-14 rounded-xl bg-[#E60000] hover:bg-[#c40000] active:bg-[#a30000] border-none text-lg font-bold shadow-xl shadow-red-100 transition-all transform hover:scale-[1.01]\"\r\n                        >\r\n                            Log in to Account\r\n                        </Button>\r\n                    </Form.Item>\r\n                </Form>\r\n\r\n                <div className=\"mt-8 text-center\">\r\n                    <Text className=\"text-gray-400 text-xs\">\r\n                        &copy; {new Date().getFullYear()} SPR ERP. All Rights Reserved.\r\n                    </Text>\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default function LoginPage() {\r\n    const [hasMounted, setHasMounted] = useState(false);\r\n\r\n    useEffect(() => {\r\n        // Just empty useEffect is enough to trigger re-render on mount if we conditionally render\r\n        setHasMounted(true);\r\n    }, []);\r\n\r\n    if (!hasMounted) {\r\n        // Return null or loader during SSR to avoid mismatch\r\n        return <div className=\"min-h-screen bg-[#f8f9fa]\" />;\r\n    }\r\n\r\n    return (\r\n        <App>\r\n            <LoginContent />\r\n        </App>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\portal\\branches\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchBranches'. Either include it or remove the dependency array.","line":19,"column":8,"nodeType":"ArrayExpression","endLine":19,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchBranches]","fix":{"range":[771,773],"text":"[fetchBranches]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":26,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":19}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[625,628],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[625,628],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1212,1215],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1212,1215],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1818,1821],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1818,1821],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2386,2389],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2386,2389],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2395,2398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2395,2398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2657,2660],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2657,2660],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3369,3372],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3369,3372],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3382,3385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3382,3385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Table, Button, Modal, Form, Input, Space, Popconfirm, App, Tag, Checkbox } from 'antd';\r\nimport { PlusOutlined, DeleteOutlined, ShopOutlined, EditOutlined } from '@ant-design/icons';\r\nimport api from '@/lib/axios';\r\n\r\nexport default function BranchesPage() {\r\n    const [branches, setBranches] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [editingBranch, setEditingBranch] = useState<any>(null);\r\n    const [form] = Form.useForm();\r\n    const { message } = App.useApp();\r\n\r\n    useEffect(() => {\r\n        fetchBranches();\r\n    }, []);\r\n\r\n    const fetchBranches = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const { data } = await api.get('/branches');\r\n            setBranches(data);\r\n        } catch (e) {\r\n            message.error('Failed to load branches');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const handleSubmit = async (values: any) => {\r\n        try {\r\n            if (editingBranch) {\r\n                await api.patch(`/branches/${editingBranch.id}`, values);\r\n                message.success('Branch updated');\r\n            } else {\r\n                await api.post('/branches', values);\r\n                message.success('Branch created');\r\n            }\r\n            setIsModalOpen(false);\r\n            setEditingBranch(null);\r\n            form.resetFields();\r\n            fetchBranches();\r\n        } catch (e: unknown) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            message.error((e as any).response?.data?.message || 'Operation failed');\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: number) => {\r\n        try {\r\n            await api.delete(`/branches/${id}`);\r\n            message.success('Branch deleted');\r\n            fetchBranches();\r\n        } catch {\r\n            message.error('Failed to delete');\r\n        }\r\n    };\r\n\r\n    const columns = [\r\n        {\r\n            title: 'No.',\r\n            key: 'index',\r\n            width: 70,\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            render: (_: any, __: any, index: number) => index + 1\r\n        },\r\n        {\r\n            title: 'Code',\r\n            dataIndex: 'code',\r\n            key: 'code',\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            render: (text: string, record: any) => (\r\n                <Space>\r\n                    <span className=\"font-mono font-bold\">{text}</span>\r\n                    {record.isHQ && <Tag color=\"red\">HQ</Tag>}\r\n                </Space>\r\n            )\r\n        },\r\n        { title: 'Name', dataIndex: 'name', key: 'name' },\r\n        { title: 'Address', dataIndex: 'address', key: 'address' },\r\n        {\r\n            title: 'Staff Count',\r\n            dataIndex: ['_count', 'users'],\r\n            key: 'usersCount',\r\n            render: (count: number) => count || 0\r\n        },\r\n        {\r\n            title: 'Actions',\r\n            key: 'actions',\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            render: (_: any, record: any) => (\r\n                <Space>\r\n                    <Button\r\n                        size=\"small\"\r\n                        icon={<EditOutlined />}\r\n                        onClick={() => {\r\n                            setEditingBranch(record);\r\n                            form.setFieldsValue(record);\r\n                            setIsModalOpen(true);\r\n                        }}\r\n                    />\r\n                    <Popconfirm title=\"Delete branch?\" description=\"This action cannot be undone.\" onConfirm={() => handleDelete(record.id)}>\r\n                        <Button danger icon={<DeleteOutlined />} size=\"small\" />\r\n                    </Popconfirm>\r\n                </Space>\r\n            )\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold\">Branch Management</h2>\r\n                    <p className=\"text-gray-500\">Manage all store locations</p>\r\n                </div>\r\n                <Button\r\n                    type=\"primary\"\r\n                    icon={<PlusOutlined />}\r\n                    onClick={() => {\r\n                        setEditingBranch(null);\r\n                        form.resetFields();\r\n                        setIsModalOpen(true);\r\n                    }}\r\n                    className=\"bg-black text-white hover:bg-gray-800\"\r\n                >\r\n                    Add Branch\r\n                </Button>\r\n            </div>\r\n\r\n            <Table\r\n                dataSource={branches}\r\n                columns={columns}\r\n                rowKey=\"id\"\r\n                loading={loading}\r\n                pagination={{ pageSize: 10 }}\r\n            />\r\n\r\n            <Modal\r\n                title={editingBranch ? \"Edit Branch\" : \"Add New Branch\"}\r\n                open={isModalOpen}\r\n                onCancel={() => {\r\n                    setIsModalOpen(false);\r\n                    setEditingBranch(null);\r\n                }}\r\n                footer={null}\r\n            >\r\n                <Form form={form} onFinish={handleSubmit} layout=\"vertical\">\r\n                    <Form.Item\r\n                        name=\"name\"\r\n                        label=\"Branch Name\"\r\n                        rules={[{ required: true, message: 'Example: Johor Bahru Central' }]}\r\n                    >\r\n                        <Input placeholder=\"Enter branch name\" prefix={<ShopOutlined />} />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"code\"\r\n                        label=\"Branch Code\"\r\n                        rules={[{ required: true, message: 'Example: JB01' }]}\r\n                    >\r\n                        <Input placeholder=\"Enter unique code (e.g. JB01)\" className=\"font-mono\" />\r\n                    </Form.Item>\r\n                    <Form.Item name=\"address\" label=\"Address\">\r\n                        <Input.TextArea rows={2} placeholder=\"Full address\" />\r\n                    </Form.Item>\r\n                    <Form.Item name=\"isHQ\" valuePropName=\"checked\">\r\n                        <Checkbox>Mark as Headquarters (HQ)</Checkbox>\r\n                    </Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\" block className=\"bg-black\">\r\n                        {editingBranch ? 'Update Branch' : 'Create Branch'}\r\n                    </Button>\r\n                </Form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\portal\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\portal\\layout.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\portal\\layout.tsx:34:13\n  32 |                 router.push('/dashboard');\n  33 |             }\n> 34 |             setUser(parsed);\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  35 |         } else {\n  36 |             router.push('/portal/login');\n  37 |         }","line":34,"column":13,"nodeType":null,"endLine":34,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Layout, Menu, theme, App as AntdApp } from 'antd';\r\nimport {\r\n    DashboardOutlined,\r\n    ShopOutlined,\r\n    UserOutlined,\r\n    LogoutOutlined\r\n} from '@ant-design/icons';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { User } from '@/lib/types';\r\n\r\nconst { Header, Sider, Content } = Layout;\r\n\r\nexport default function PortalLayout({ children }: { children: React.ReactNode }) {\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n    const {\r\n        token: { colorBgContainer, borderRadiusLG },\r\n    } = theme.useToken();\r\n\r\n    useEffect(() => {\r\n        if (pathname === '/portal/login' || pathname === '/portal') return;\r\n\r\n        const storedUser = localStorage.getItem('user');\r\n        if (storedUser) {\r\n            const parsed = JSON.parse(storedUser);\r\n            if (parsed.role !== 'SUPER_ADMIN') {\r\n                router.push('/dashboard');\r\n            }\r\n            setUser(parsed);\r\n        } else {\r\n            router.push('/portal/login');\r\n        }\r\n    }, [router, pathname]);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        router.push('/portal/login');\r\n    };\r\n\r\n    // Only show sidebar/header for authenticated Super Admins\r\n    const isLoginPage = pathname === '/portal/login' || pathname === '/portal';\r\n\r\n    if (!isLoginPage && !user) return null;\r\n\r\n    if (isLoginPage) return <AntdApp>{children}</AntdApp>;\r\n\r\n    return (\r\n        <AntdApp>\r\n            <Layout style={{ minHeight: '100vh' }}>\r\n                <Sider trigger={null} collapsible collapsed={collapsed} onCollapse={setCollapsed} theme=\"dark\" className=\"bg-gray-900\">\r\n                    <div className=\"p-4 text-white font-bold text-center text-lg border-b border-gray-800 mb-4\">\r\n                        {collapsed ? 'ADM' : 'ADMIN PORTAL'}\r\n                    </div>\r\n                    <Menu\r\n                        theme=\"dark\"\r\n                        mode=\"inline\"\r\n                        selectedKeys={[pathname]}\r\n                        className=\"bg-gray-900\"\r\n                        onClick={({ key }) => {\r\n                            if (key === 'logout') handleLogout();\r\n                            else router.push(key);\r\n                        }}\r\n                        items={[\r\n                            {\r\n                                key: '/portal/dashboard',\r\n                                icon: <DashboardOutlined />,\r\n                                label: 'Dashboard',\r\n                            },\r\n                            {\r\n                                key: '/portal/branches',\r\n                                icon: <ShopOutlined />,\r\n                                label: 'Branch Management',\r\n                            },\r\n                            {\r\n                                key: '/portal/users',\r\n                                icon: <UserOutlined />,\r\n                                label: 'User Management',\r\n                            },\r\n                            {\r\n                                key: 'logout',\r\n                                icon: <LogoutOutlined />,\r\n                                label: 'Logout',\r\n                                danger: true,\r\n                            }\r\n                        ]}\r\n                    />\r\n                </Sider>\r\n                <Layout>\r\n                    <Header style={{ padding: 0, background: colorBgContainer, display: 'flex', alignItems: 'center', justifyContent: 'space-between', paddingRight: 24, paddingLeft: 24 }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                            {user && (\r\n                                <div style={{ fontWeight: '600', color: '#555', fontSize: '14px' }}>\r\n                                    Current ID: <span style={{ color: '#E60000' }}>{user.fullName}</span>\r\n                                    <span style={{ marginLeft: 8, padding: '2px 8px', background: '#FFF1F0', border: '1px solid #FFA39E', borderRadius: '4px', fontSize: '12px', color: '#CF1322' }}>\r\n                                        {user.username}\r\n                                    </span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </Header>\r\n                    <Content\r\n                        style={{\r\n                            margin: '24px 16px',\r\n                            padding: 24,\r\n                            minHeight: 280,\r\n                            background: colorBgContainer,\r\n                            borderRadius: borderRadiusLG,\r\n                        }}\r\n                    >\r\n                        {children}\r\n                    </Content>\r\n                </Layout>\r\n            </Layout>\r\n        </AntdApp>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\portal\\login\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\portal\\login\\page.tsx:79:9\n  77 |\n  78 |     useEffect(() => {\n> 79 |         setHasMounted(true);\n     |         ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  80 |     }, []);\n  81 |\n  82 |     if (!hasMounted) {","line":79,"column":9,"nodeType":null,"endLine":79,"endColumn":22}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[622,625],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[622,625],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1319,1322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1319,1322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, Card, Typography, App } from 'antd';\r\nimport { LockOutlined, UserOutlined, ArrowRightOutlined } from '@ant-design/icons';\r\nimport { useRouter } from 'next/navigation';\r\nimport api from '@/lib/axios';\r\nimport Image from 'next/image';\r\n\r\nconst { Text } = Typography;\r\n\r\nfunction LoginForm() {\r\n    const [loading, setLoading] = useState(false);\r\n    const router = useRouter();\r\n    const { message } = App.useApp();\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const onFinish = async (values: any) => {\r\n        setLoading(true);\r\n        try {\r\n            const { data } = await api.post('/auth/login', values);\r\n            if (data.user.role !== 'SUPER_ADMIN') {\r\n                message.error('Access Denied: Super Admin credentials required');\r\n                return;\r\n            }\r\n            localStorage.setItem('token', data.access_token);\r\n            localStorage.setItem('user', JSON.stringify(data.user));\r\n            message.success('Authorized Access: Welcome, Administrator');\r\n            router.push('/portal/dashboard');\r\n        } catch (err: unknown) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            message.error((err as any).response?.data?.message || 'Authorization failed. Access restricted.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Form\r\n            layout=\"vertical\"\r\n            onFinish={onFinish}\r\n            size=\"large\"\r\n            requiredMark={false}\r\n        >\r\n            <Form.Item name=\"username\" rules={[{ required: true, message: 'Admin username required' }]}>\r\n                <Input\r\n                    prefix={<UserOutlined className=\"text-gray-400 mr-2\" />}\r\n                    placeholder=\"Admin Username\"\r\n                    className=\"rounded-xl border-gray-100 hover:border-red-400 focus:border-red-500 h-12\"\r\n                />\r\n            </Form.Item>\r\n            <Form.Item name=\"password\" rules={[{ required: true, message: 'Security password required' }]} className=\"mb-8\">\r\n                <Input.Password\r\n                    prefix={<LockOutlined className=\"text-gray-400 mr-2\" />}\r\n                    placeholder=\"Password\"\r\n                    className=\"rounded-xl border-gray-100 hover:border-red-400 focus:border-red-500 h-12\"\r\n                />\r\n            </Form.Item>\r\n            <Form.Item className=\"mb-0\">\r\n                <Button\r\n                    type=\"primary\"\r\n                    htmlType=\"submit\"\r\n                    block\r\n                    loading={loading}\r\n                    icon={<ArrowRightOutlined />}\r\n                    className=\"h-14 rounded-xl bg-[#E60000] hover:bg-[#c40000] border-none text-lg font-bold shadow-xl shadow-red-100 transition-all transform hover:scale-[1.01]\"\r\n                >\r\n                    Authorize Entry\r\n                </Button>\r\n            </Form.Item>\r\n        </Form>\r\n    );\r\n}\r\n\r\nexport default function PortalLogin() {\r\n    const [hasMounted, setHasMounted] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setHasMounted(true);\r\n    }, []);\r\n\r\n    if (!hasMounted) {\r\n        return <div className=\"min-h-screen bg-[#f8f9fa]\" />;\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-[#f8f9fa] relative overflow-hidden\" suppressHydrationWarning>\r\n            {/* Professional Background Accents */}\r\n            <div className=\"absolute top-0 left-0 w-full h-1 bg-[#E60000]\" />\r\n            <div className=\"absolute top-[-20%] right-[-10%] w-[50%] h-[50%] bg-red-50 rounded-full blur-[150px] opacity-70\" />\r\n            <div className=\"absolute bottom-[-20%] left-[-10%] w-[50%] h-[50%] bg-gray-100 rounded-full blur-[150px] opacity-50\" />\r\n\r\n            <App>\r\n                <Card\r\n                    className=\"w-full max-w-[440px] shadow-[0_30px_60px_rgba(0,0,0,0.08)] border-none rounded-3xl overflow-hidden\"\r\n                    styles={{ body: { padding: '48px 40px' } }}\r\n                >\r\n                    <div className=\"text-center mb-10\">\r\n                        <div className=\"inline-flex items-center justify-center mb-8\">\r\n                            <Image src=\"/logo.png\" alt=\"SPR Logo\" width={256} height={60} className=\"w-64 h-auto drop-shadow-xl\" />\r\n                        </div>\r\n                        <div className=\"flex items-center justify-center\">\r\n                            <span className=\"h-[1px] w-4 bg-gray-200\" />\r\n                            <Text className=\"text-gray-400 font-semibold px-3 uppercase tracking-widest text-[10px]\">Security Clearance Required</Text>\r\n                            <span className=\"h-[1px] w-4 bg-gray-200\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <LoginForm />\r\n\r\n                    <div className=\"mt-10 pt-8 border-t border-gray-50 text-center\">\r\n                        <Text className=\"text-gray-300 text-[10px] tracking-widest uppercase\">\r\n                            Secure Personnel Access Only\r\n                        </Text>\r\n                    </div>\r\n                </Card>\r\n            </App>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\portal\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\app\\portal\\users\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PlusOutlined' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":22,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"PlusOutlined"},"fix":{"range":[175,188],"text":""},"desc":"Remove unused variable \"PlusOutlined\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[551,554],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[551,554],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[722,725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[722,725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchUsers'. Either include it or remove the dependency array.","line":23,"column":8,"nodeType":"ArrayExpression","endLine":23,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchUsers]","fix":{"range":[871,873],"text":"[fetchUsers]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":30,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":41,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1477,1480],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1477,1480],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2068,2071],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2068,2071],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":72,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2587,2590],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2587,2590],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2596,2599],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2596,2599],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3372,3375],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3372,3375],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3565,3568],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3565,3568],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3578,3581],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3578,3581],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":125,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4305,4308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4305,4308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":199,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":199,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7844,7847],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7844,7847],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Table, Button, Modal, Form, Input, Select, Tag, Space, Popconfirm, App } from 'antd';\r\nimport { PlusOutlined, DeleteOutlined, EditOutlined, UserAddOutlined } from '@ant-design/icons';\r\nimport api from '@/lib/axios';\r\n\r\nexport default function PortalUsersPage() {\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [editingUser, setEditingUser] = useState<any>(null);\r\n    const [form] = Form.useForm();\r\n    const { message } = App.useApp();\r\n\r\n    // Fetch Branches for dropdown\r\n    const [branches, setBranches] = useState<any[]>([]);\r\n    const [searchText, setSearchText] = useState('');\r\n\r\n    useEffect(() => {\r\n        fetchUsers();\r\n        fetchBranches();\r\n    }, []);\r\n\r\n    const fetchUsers = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const { data } = await api.get('/users');\r\n            setUsers(data);\r\n        } catch (e) {\r\n            message.error('Failed to load users');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchBranches = async () => {\r\n        try {\r\n            const { data } = await api.get('/branches');\r\n            setBranches(data);\r\n        } catch (e) {\r\n            console.error('Failed to load branches');\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (values: any) => {\r\n        // Convert branchId to int if present\r\n        if (values.branchId) values.branchId = parseInt(values.branchId);\r\n\r\n        try {\r\n            if (editingUser) {\r\n                await api.patch(`/users/${editingUser.id}`, values);\r\n                message.success('User updated');\r\n            } else {\r\n                await api.post('/users', values);\r\n                message.success('User created');\r\n            }\r\n            setIsModalOpen(false);\r\n            form.resetFields();\r\n            setEditingUser(null);\r\n            fetchUsers();\r\n        } catch (e: any) {\r\n            message.error(e.response?.data?.message || 'Operation failed');\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: number) => {\r\n        try {\r\n            await api.delete(`/users/${id}`);\r\n            message.success('User deleted');\r\n            fetchUsers();\r\n        } catch (e) {\r\n            message.error('Failed to delete');\r\n        }\r\n    };\r\n\r\n    const columns = [\r\n        {\r\n            title: 'No.',\r\n            key: 'index',\r\n            width: 60,\r\n            render: (_: any, __: any, index: number) => index + 1\r\n        },\r\n        { title: 'Username', dataIndex: 'username', key: 'username', render: (text: string) => <span className=\"font-semibold\">{text}</span> },\r\n        { title: 'Full Name', dataIndex: 'fullName', key: 'fullName' },\r\n        {\r\n            title: 'Role',\r\n            dataIndex: 'role',\r\n            key: 'role',\r\n            render: (role: string) => {\r\n                let color = 'blue';\r\n                if (role === 'SUPER_ADMIN') color = 'gold';\r\n                if (role === 'TECHNICIAN') color = 'cyan';\r\n                return <Tag color={color}>{role}</Tag>;\r\n            }\r\n        },\r\n        {\r\n            title: 'Branch',\r\n            dataIndex: 'branch',\r\n            key: 'branch',\r\n            render: (branch: any) => branch ? <Tag>{branch.code}</Tag> : <span className=\"text-gray-400\">-</span>\r\n        },\r\n        {\r\n            title: 'Actions',\r\n            key: 'actions',\r\n            render: (_: any, record: any) => (\r\n                <Space>\r\n                    <Button\r\n                        size=\"small\"\r\n                        icon={<EditOutlined />}\r\n                        onClick={() => {\r\n                            setEditingUser(record);\r\n                            form.setFieldsValue(record);\r\n                            setIsModalOpen(true);\r\n                        }}\r\n                    />\r\n                    <Popconfirm title=\"Delete user?\" onConfirm={() => handleDelete(record.id)}>\r\n                        <Button size=\"small\" danger icon={<DeleteOutlined />} />\r\n                    </Popconfirm>\r\n                </Space>\r\n            )\r\n        }\r\n    ];\r\n\r\n    const filteredUsers = users.filter((u: any) =>\r\n        u.username.toLowerCase().includes(searchText.toLowerCase()) ||\r\n        u.fullName.toLowerCase().includes(searchText.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold\">User Management</h2>\r\n                    <p className=\"text-gray-500\">Manage system access and roles</p>\r\n                </div>\r\n                <Space>\r\n                    <Input.Search\r\n                        placeholder=\"Search username or name...\"\r\n                        allowClear\r\n                        onSearch={setSearchText}\r\n                        onChange={(e) => setSearchText(e.target.value)}\r\n                        style={{ width: 300 }}\r\n                    />\r\n                    <Button\r\n                        type=\"primary\"\r\n                        icon={<UserAddOutlined />}\r\n                        onClick={() => {\r\n                            setEditingUser(null);\r\n                            form.resetFields();\r\n                            setIsModalOpen(true);\r\n                        }}\r\n                        className=\"bg-black\"\r\n                    >\r\n                        Add User\r\n                    </Button>\r\n                </Space>\r\n            </div>\r\n\r\n            <Table dataSource={filteredUsers} columns={columns} rowKey=\"id\" loading={loading} />\r\n\r\n            <Modal\r\n                title={editingUser ? \"Edit User\" : \"Create User\"}\r\n                open={isModalOpen}\r\n                onCancel={() => setIsModalOpen(false)}\r\n                footer={null}\r\n            >\r\n                <Form form={form} onFinish={handleSubmit} layout=\"vertical\">\r\n                    <Form.Item name=\"username\" label=\"Username\" rules={[{ required: true }]}>\r\n                        <Input readOnly={!!editingUser} disabled={!!editingUser} />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        name=\"password\"\r\n                        label={editingUser ? \"New Password\" : \"Password\"}\r\n                        rules={[{ required: !editingUser }]}\r\n                        help={editingUser ? \"Leave blank to keep current password\" : \"\"}\r\n                    >\r\n                        <Input.Password placeholder={editingUser ? \"********\" : \"\"} />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item name=\"fullName\" label=\"Full Name\" rules={[{ required: true }]}>\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <Form.Item name=\"role\" label=\"Role\" rules={[{ required: true }]}>\r\n                            <Select placeholder=\"Select role\">\r\n                                <Select.Option value=\"SUPER_ADMIN\">Super Admin</Select.Option>\r\n                                <Select.Option value=\"HQ_ADMIN\">HQ Admin</Select.Option>\r\n                                <Select.Option value=\"BRANCH_ADMIN\">Branch Admin</Select.Option>\r\n                                <Select.Option value=\"TECHNICIAN\">Technician</Select.Option>\r\n                                <Select.Option value=\"COURIER\">Courier</Select.Option>\r\n                            </Select>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item name=\"branchId\" label=\"Branch\">\r\n                            <Select placeholder=\"Select branch\" allowClear>\r\n                                {branches.map((b: any) => (\r\n                                    <Select.Option key={b.id} value={b.id}>\r\n                                        {b.code} - {b.name}\r\n                                    </Select.Option>\r\n                                ))}\r\n                            </Select>\r\n                        </Form.Item>\r\n                    </div>\r\n\r\n                    <Button type=\"primary\" htmlType=\"submit\" block className=\"bg-black mt-2\">\r\n                        {editingUser ? 'Update User' : 'Create User'}\r\n                    </Button>\r\n                </Form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\components\\BatchDetailModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[651,654],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[651,654],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1454,1457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1454,1457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\components\\CreateBatchModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1153,1156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1153,1156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2605,2608],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2605,2608],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\components\\CreateRepairModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[599,602],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[599,602],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1010,1013],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1010,1013],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\components\\RepairDetailModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":140,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":140,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6878,6881],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6878,6881],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[849,852],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[849,852],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1237,1240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1237,1240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2023,2026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2023,2026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2259,2262],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2259,2262],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3131,3134],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3131,3134],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Card, Descriptions, Tag, Timeline, Button, Modal, Form, Select, Input, App, Spin, Space, Popconfirm } from 'antd';\r\nimport { ClockCircleOutlined, CheckCircleOutlined } from '@ant-design/icons';\r\nimport api from '@/lib/axios';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { formatDate } from '@/lib/utils';\r\n\r\ninterface RepairDetailModalProps {\r\n    orderId: number | null;\r\n    open: boolean;\r\n    onCancel: () => void;\r\n    onActionSuccess: () => void;\r\n}\r\n\r\nexport default function RepairDetailModal({ orderId, open, onCancel, onActionSuccess }: RepairDetailModalProps) {\r\n    const { user, hasRole } = useAuth();\r\n    const { message } = App.useApp();\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [order, setOrder] = useState<any>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [actionLoading, setActionLoading] = useState(false);\r\n    const [isAssignModalOpen, setIsAssignModalOpen] = useState(false);\r\n    const [isFailModalOpen, setIsFailModalOpen] = useState(false);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [technicians, setTechnicians] = useState<any[]>([]);\r\n\r\n    const fetchOrder = React.useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const { data } = await api.get(`/repairs/${orderId}`);\r\n            setOrder(data);\r\n        } catch {\r\n            message.error('Failed to load order');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [orderId, message]);\r\n    useEffect(() => {\r\n        if (open && orderId) {\r\n            fetchOrder();\r\n        } else {\r\n            setOrder(null);\r\n        }\r\n    }, [open, orderId, fetchOrder]);\r\n\r\n    const loadTechnicians = async () => {\r\n        try {\r\n            const { data } = await api.get('/users');\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            setTechnicians(data.filter((u: any) => u.role === 'TECHNICIAN'));\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const handleAction = async (action: string, payload: any = {}) => {\r\n        setActionLoading(true);\r\n        try {\r\n            if (action === 'assign') {\r\n                await api.patch(`/repairs/${orderId}/assign`, payload);\r\n                setIsAssignModalOpen(false);\r\n            } else if (action === 'start') {\r\n                await api.patch(`/repairs/${orderId}/start`);\r\n            } else if (action === 'complete') {\r\n                await api.patch(`/repairs/${orderId}/complete`);\r\n            } else if (action === 'fail') {\r\n                await api.patch(`/repairs/${orderId}/fail`, payload);\r\n                setIsFailModalOpen(false);\r\n            }\r\n            message.success('Action successful');\r\n            fetchOrder();\r\n            onActionSuccess();\r\n        } catch (e: unknown) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            message.error((e as any).response?.data?.message || 'Action failed');\r\n        } finally {\r\n            setActionLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal\r\n            title={<span className=\"text-xl font-bold\">Repair Details #{order?.orderNo}</span>}\r\n            open={open}\r\n            onCancel={onCancel}\r\n            footer={null}\r\n            width={850}\r\n            destroyOnHidden\r\n        >\r\n            {loading ? (\r\n                <div className=\"py-20 text-center\"><Spin size=\"large\" /></div>\r\n            ) : order ? (\r\n                <div className=\"mt-6\">\r\n                    <div className=\"flex justify-end mb-6\">\r\n                        <Space>\r\n                            {hasRole(['HQ_ADMIN', 'SUPER_ADMIN']) && order.status === 'AT_HQ' && (\r\n                                <Button type=\"primary\" size=\"large\" style={{ backgroundColor: '#E60000' }} onClick={() => { setIsAssignModalOpen(true); loadTechnicians(); }}>\r\n                                    Assign Technician\r\n                                </Button>\r\n                            )}\r\n\r\n                            {hasRole(['TECHNICIAN']) && order.status === 'ASSIGNED_TO_TECHNICIAN' && user?.id === order.technicianId && (\r\n                                <Button type=\"primary\" size=\"large\" style={{ backgroundColor: '#E60000' }} onClick={() => handleAction('start')}>\r\n                                    Start Repair\r\n                                </Button>\r\n                            )}\r\n\r\n                            {hasRole(['TECHNICIAN']) && order.status === 'UNDER_REPAIR' && user?.id === order.technicianId && (\r\n                                <>\r\n                                    <Popconfirm title=\"Mark as Fixed?\" onConfirm={() => handleAction('complete')}>\r\n                                        <Button type=\"primary\" size=\"large\" style={{ backgroundColor: 'green' }}>Complete Repair</Button>\r\n                                    </Popconfirm>\r\n                                    <Button danger size=\"large\" onClick={() => setIsFailModalOpen(true)}>Mark Failed</Button>\r\n                                </>\r\n                            )}\r\n                        </Space>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 gap-8\">\r\n                        <div>\r\n                            <Card title=\"Device Information\" variant=\"borderless\" className=\"bg-gray-50 rounded-xl\">\r\n                                <Descriptions column={2} styles={{ label: { fontWeight: 'bold' } }}>\r\n                                    <Descriptions.Item label=\"Device Model\">{order.deviceModel}</Descriptions.Item>\r\n                                    <Descriptions.Item label=\"IMEI / SN\">{order.isbn_imei || '-'}</Descriptions.Item>\r\n                                    <Descriptions.Item label=\"Issue Description\" span={2}>{order.problemDesc}</Descriptions.Item>\r\n                                    <Descriptions.Item label=\"Internal Status\">\r\n                                        <Tag color=\"red\" variant=\"filled\" className=\"font-bold\">{order.status}</Tag>\r\n                                    </Descriptions.Item>\r\n                                    <Descriptions.Item label=\"Technician\">{order.technician?.fullName || 'Not Assigned'}</Descriptions.Item>\r\n                                </Descriptions>\r\n                            </Card>\r\n                        </div>\r\n                        <div>\r\n                            <Card title=\"Flow History\" variant=\"borderless\" className=\"bg-gray-50 rounded-xl\">\r\n                                <div className=\"px-2 py-2\">\r\n                                    <Timeline\r\n                                        items={order.history?.map((log: any) => ({\r\n                                            color: log.toStatus === 'REPAIR_FAILED' ? 'red' : 'blue',\r\n                                            icon: log.isScanAction ? <CheckCircleOutlined /> : <ClockCircleOutlined />,\r\n                                            children: (\r\n                                                <div className=\"flex flex-col md:flex-row md:items-start gap-4 -mt-1 pb-4\">\r\n                                                    <div className=\"min-w-[150px] pt-0.5\">\r\n                                                        <span className=\"text-gray-400 font-bold text-sm block\">{formatDate(log.createdAt)}</span>\r\n                                                    </div>\r\n                                                    <div className=\"flex-1\">\r\n                                                        <p className=\"font-bold text-base m-0 text-gray-800 leading-tight\">\r\n                                                            {log.toStatus.replace(/_/g, ' ')}\r\n                                                        </p>\r\n                                                        <p className=\"text-gray-500 text-sm m-0 mt-1\">\r\n                                                            {log.remark || 'Status updated'} by <span className=\"text-gray-700 font-semibold\">{log.user?.fullName}</span>\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            )\r\n                                        }))}\r\n                                    />\r\n                                </div>\r\n                            </Card>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Sub Modals */}\r\n                    <Modal title=\"Assign Technician\" open={isAssignModalOpen} onCancel={() => setIsAssignModalOpen(false)} footer={null} destroyOnHidden>\r\n                        <Form onFinish={(vals) => handleAction('assign', vals)} layout=\"vertical\" className=\"mt-4\">\r\n                            <Form.Item name=\"technicianId\" label=\"Select Technician\" rules={[{ required: true }]}>\r\n                                <Select placeholder=\"Select a tech...\" size=\"large\">\r\n                                    {technicians.map(t => (\r\n                                        <Select.Option key={t.id} value={t.id}>{t.fullName} ({t.username})</Select.Option>\r\n                                    ))}\r\n                                </Select>\r\n                            </Form.Item>\r\n                            <Button type=\"primary\" htmlType=\"submit\" loading={actionLoading} block size=\"large\" style={{ backgroundColor: '#E60000' }}>Confirm Assignment</Button>\r\n                        </Form>\r\n                    </Modal>\r\n\r\n                    <Modal title=\"Report Repair Failure\" open={isFailModalOpen} onCancel={() => setIsFailModalOpen(false)} footer={null} destroyOnHidden>\r\n                        <Form onFinish={(vals) => handleAction('fail', vals)} layout=\"vertical\" className=\"mt-4\">\r\n                            <Form.Item name=\"reason\" label=\"Failure Reason\" rules={[{ required: true }]}>\r\n                                <Input.TextArea rows={4} placeholder=\"Why this device cannot be fixed?\" size=\"large\" />\r\n                            </Form.Item>\r\n                            <Button danger type=\"primary\" htmlType=\"submit\" loading={actionLoading} block size=\"large\">Confirm Failure</Button>\r\n                        </Form>\r\n                    </Modal>\r\n                </div>\r\n            ) : null}\r\n        </Modal>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\hooks\\useAuth.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":10,"column":13,"severity":1,"nodeType":null,"fix":{"range":[286,341],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useState, useEffect } from 'react';\r\nimport { User } from '@/lib/types';\r\n\r\nexport function useAuth() {\r\n    const [user, setUser] = useState<User | null>(null);\r\n\r\n    useEffect(() => {\r\n        const stored = localStorage.getItem('user');\r\n        if (stored) {\r\n            // eslint-disable-next-line react-hooks/exhaustive-deps\r\n            setUser(JSON.parse(stored));\r\n        }\r\n    }, []);\r\n\r\n    const hasRole = (roles: string[]) => {\r\n        return user && roles.includes(user.role);\r\n    };\r\n\r\n    return { user, hasRole, loading: !user && typeof window !== 'undefined' && localStorage.getItem('user') };\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\lib\\axios.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\lib\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\CYXY\\Desktop\\SPR ERP\\src\\lib\\axios.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]